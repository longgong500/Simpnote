{"ast":null,"code":"import { Note } from './note.js';\nimport { Barline, BarlineType } from './stavebarline.js';\nimport { log } from './util.js';\nfunction L(...args) {\n  if (BarNote.DEBUG) log('Vex.Flow.BarNote', args);\n}\nclass BarNote extends Note {\n  static get CATEGORY() {\n    return \"BarNote\";\n  }\n  constructor(type = BarlineType.SINGLE) {\n    super({\n      duration: 'b'\n    });\n    this.metrics = {\n      widths: {}\n    };\n    const TYPE = BarlineType;\n    this.metrics.widths = {\n      [TYPE.SINGLE]: 8,\n      [TYPE.DOUBLE]: 12,\n      [TYPE.END]: 15,\n      [TYPE.REPEAT_BEGIN]: 14,\n      [TYPE.REPEAT_END]: 14,\n      [TYPE.REPEAT_BOTH]: 18,\n      [TYPE.NONE]: 0\n    };\n    this.ignore_ticks = true;\n    this.setType(type);\n    this.barline = new Barline(type);\n  }\n  getType() {\n    return this.type;\n  }\n  setType(type) {\n    this.type = typeof type === 'string' ? Barline.typeString[type] : type;\n    this.setWidth(this.metrics.widths[this.type]);\n    return this;\n  }\n  addToModifierContext(mc) {\n    return this;\n  }\n  preFormat() {\n    this.preFormatted = true;\n    return this;\n  }\n  draw() {\n    const ctx = this.checkContext();\n    L('Rendering bar line at: ', this.getAbsoluteX());\n    this.applyStyle(ctx);\n    ctx.openGroup('barnote', this.getAttribute('id'));\n    this.barline.setType(this.type);\n    this.barline.setX(this.getAbsoluteX());\n    this.barline.draw(this.checkStave());\n    ctx.closeGroup();\n    this.restoreStyle(ctx);\n    this.setRendered();\n  }\n}\nBarNote.DEBUG = false;\nexport { BarNote };","map":{"version":3,"names":["Note","Barline","BarlineType","log","L","args","BarNote","DEBUG","CATEGORY","constructor","type","SINGLE","duration","metrics","widths","TYPE","DOUBLE","END","REPEAT_BEGIN","REPEAT_END","REPEAT_BOTH","NONE","ignore_ticks","setType","barline","getType","typeString","setWidth","addToModifierContext","mc","preFormat","preFormatted","draw","ctx","checkContext","getAbsoluteX","applyStyle","openGroup","getAttribute","setX","checkStave","closeGroup","restoreStyle","setRendered"],"sources":["/Users/longgongmeishi/projects/yixian/music-notation-app/node_modules/vexflow/build/esm/src/barnote.js"],"sourcesContent":["import { Note } from './note.js';\nimport { Barline, BarlineType } from './stavebarline.js';\nimport { log } from './util.js';\nfunction L(...args) {\n    if (BarNote.DEBUG)\n        log('Vex.Flow.BarNote', args);\n}\nclass BarNote extends Note {\n    static get CATEGORY() {\n        return \"BarNote\";\n    }\n    constructor(type = BarlineType.SINGLE) {\n        super({ duration: 'b' });\n        this.metrics = {\n            widths: {},\n        };\n        const TYPE = BarlineType;\n        this.metrics.widths = {\n            [TYPE.SINGLE]: 8,\n            [TYPE.DOUBLE]: 12,\n            [TYPE.END]: 15,\n            [TYPE.REPEAT_BEGIN]: 14,\n            [TYPE.REPEAT_END]: 14,\n            [TYPE.REPEAT_BOTH]: 18,\n            [TYPE.NONE]: 0,\n        };\n        this.ignore_ticks = true;\n        this.setType(type);\n        this.barline = new Barline(type);\n    }\n    getType() {\n        return this.type;\n    }\n    setType(type) {\n        this.type = typeof type === 'string' ? Barline.typeString[type] : type;\n        this.setWidth(this.metrics.widths[this.type]);\n        return this;\n    }\n    addToModifierContext(mc) {\n        return this;\n    }\n    preFormat() {\n        this.preFormatted = true;\n        return this;\n    }\n    draw() {\n        const ctx = this.checkContext();\n        L('Rendering bar line at: ', this.getAbsoluteX());\n        this.applyStyle(ctx);\n        ctx.openGroup('barnote', this.getAttribute('id'));\n        this.barline.setType(this.type);\n        this.barline.setX(this.getAbsoluteX());\n        this.barline.draw(this.checkStave());\n        ctx.closeGroup();\n        this.restoreStyle(ctx);\n        this.setRendered();\n    }\n}\nBarNote.DEBUG = false;\nexport { BarNote };\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,WAAW;AAChC,SAASC,OAAO,EAAEC,WAAW,QAAQ,mBAAmB;AACxD,SAASC,GAAG,QAAQ,WAAW;AAC/B,SAASC,CAACA,CAAC,GAAGC,IAAI,EAAE;EAChB,IAAIC,OAAO,CAACC,KAAK,EACbJ,GAAG,CAAC,kBAAkB,EAAEE,IAAI,CAAC;AACrC;AACA,MAAMC,OAAO,SAASN,IAAI,CAAC;EACvB,WAAWQ,QAAQA,CAAA,EAAG;IAClB,OAAO,SAAS;EACpB;EACAC,WAAWA,CAACC,IAAI,GAAGR,WAAW,CAACS,MAAM,EAAE;IACnC,KAAK,CAAC;MAAEC,QAAQ,EAAE;IAAI,CAAC,CAAC;IACxB,IAAI,CAACC,OAAO,GAAG;MACXC,MAAM,EAAE,CAAC;IACb,CAAC;IACD,MAAMC,IAAI,GAAGb,WAAW;IACxB,IAAI,CAACW,OAAO,CAACC,MAAM,GAAG;MAClB,CAACC,IAAI,CAACJ,MAAM,GAAG,CAAC;MAChB,CAACI,IAAI,CAACC,MAAM,GAAG,EAAE;MACjB,CAACD,IAAI,CAACE,GAAG,GAAG,EAAE;MACd,CAACF,IAAI,CAACG,YAAY,GAAG,EAAE;MACvB,CAACH,IAAI,CAACI,UAAU,GAAG,EAAE;MACrB,CAACJ,IAAI,CAACK,WAAW,GAAG,EAAE;MACtB,CAACL,IAAI,CAACM,IAAI,GAAG;IACjB,CAAC;IACD,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,OAAO,CAACb,IAAI,CAAC;IAClB,IAAI,CAACc,OAAO,GAAG,IAAIvB,OAAO,CAACS,IAAI,CAAC;EACpC;EACAe,OAAOA,CAAA,EAAG;IACN,OAAO,IAAI,CAACf,IAAI;EACpB;EACAa,OAAOA,CAACb,IAAI,EAAE;IACV,IAAI,CAACA,IAAI,GAAG,OAAOA,IAAI,KAAK,QAAQ,GAAGT,OAAO,CAACyB,UAAU,CAAChB,IAAI,CAAC,GAAGA,IAAI;IACtE,IAAI,CAACiB,QAAQ,CAAC,IAAI,CAACd,OAAO,CAACC,MAAM,CAAC,IAAI,CAACJ,IAAI,CAAC,CAAC;IAC7C,OAAO,IAAI;EACf;EACAkB,oBAAoBA,CAACC,EAAE,EAAE;IACrB,OAAO,IAAI;EACf;EACAC,SAASA,CAAA,EAAG;IACR,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,OAAO,IAAI;EACf;EACAC,IAAIA,CAAA,EAAG;IACH,MAAMC,GAAG,GAAG,IAAI,CAACC,YAAY,CAAC,CAAC;IAC/B9B,CAAC,CAAC,yBAAyB,EAAE,IAAI,CAAC+B,YAAY,CAAC,CAAC,CAAC;IACjD,IAAI,CAACC,UAAU,CAACH,GAAG,CAAC;IACpBA,GAAG,CAACI,SAAS,CAAC,SAAS,EAAE,IAAI,CAACC,YAAY,CAAC,IAAI,CAAC,CAAC;IACjD,IAAI,CAACd,OAAO,CAACD,OAAO,CAAC,IAAI,CAACb,IAAI,CAAC;IAC/B,IAAI,CAACc,OAAO,CAACe,IAAI,CAAC,IAAI,CAACJ,YAAY,CAAC,CAAC,CAAC;IACtC,IAAI,CAACX,OAAO,CAACQ,IAAI,CAAC,IAAI,CAACQ,UAAU,CAAC,CAAC,CAAC;IACpCP,GAAG,CAACQ,UAAU,CAAC,CAAC;IAChB,IAAI,CAACC,YAAY,CAACT,GAAG,CAAC;IACtB,IAAI,CAACU,WAAW,CAAC,CAAC;EACtB;AACJ;AACArC,OAAO,CAACC,KAAK,GAAG,KAAK;AACrB,SAASD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}